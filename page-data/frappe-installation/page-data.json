{"componentChunkName":"component---src-templates-post-jsx","path":"/frappe-installation/","result":{"data":{"site":{"siteMetadata":{"title":"B.Y.HEO's Blog"}},"markdownRemark":{"id":"6e37c0b4-faff-5f7c-94ff-b66196af4e4a","excerpt":"Frappe Framework 설치 : Ubuntu 22.04기준 1. 필수 프로그램 설치 1.1. apt repository 업데이트 1.2. 파이썬 Repo 설치 1.3. 파이썬 설치 3.10 1.4. PIP 설치 1.5. 파이썬 가상환경 설치 1.6. 마리아 DB 설치 1.7. 레디스 서버 설치 1.8. Nodejs 설치 1.9. Yarn 패키지 관…","html":"<h1>Frappe Framework 설치 : Ubuntu 22.04기준</h1>\n<h1>1. 필수 프로그램 설치</h1>\n<h2>1.1. apt repository 업데이트</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get update</code></pre></div>\n<h2>1.2. 파이썬 Repo 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo add-apt-repository -y ppa:deadsnakes/ppa</code></pre></div>\n<h2>1.3. 파이썬 설치 3.10</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install -y python3.10</code></pre></div>\n<h2>1.4. PIP 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install -y python3-pip</code></pre></div>\n<h2>1.5. 파이썬 가상환경 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install -y python3.10-venv</code></pre></div>\n<h2>1.6. 마리아 DB 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install -y mariadb-server-10.6\nsudo apt install -y libmysqlclient-dev</code></pre></div>\n<h2>1.7. 레디스 서버 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install -y redis-server</code></pre></div>\n<h2>1.8. Nodejs 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -s https://deb.nodesource.com/setup_18.x | sudo bash\nsudo apt-get install -y nodejs</code></pre></div>\n<h2>1.9. Yarn 패키지 관리자 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg >/dev/null\necho \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\nsudo apt-get update &amp;&amp; sudo apt-get install yarn</code></pre></div>\n<h2>1.10. nginx 및 supervisor 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install nginx supervisor</code></pre></div>\n<h2>1.11. gunicorn wsgi gateway 인터페이스 서버설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pip install gunicorn</code></pre></div>\n<h2>1.12. PDF 변환용 모듈 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install -y xvfb libfontconfig wkhtmltopdf poppler-utils</code></pre></div>\n<h2>1.13. frappe-bench 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo pip install frappe-bench</code></pre></div>\n<h1>2. 프로그램 설정</h1>\n<h2>2.1. Maria DB 설정</h2>\n<h3>서버 설정</h3>\n<p>unicode 사용으로 변경</p>\n<blockquote>\n<p>sudo nano /etc/mysql/mariadb.conf.d/50-server.cnf</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[mysqld] \ncharacter-set-client-handshake = FALSE\ncharacter-set-server=utf8mb4\ncollation-server=utf8mb4_unicode_ci</code></pre></div>\n<blockquote>\n<p>sudo nano /etc/mysql/mariadb.conf.d/50-mysql-clients.cnf</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">default-character-set = utf8mb4</code></pre></div>\n<h3>DB 시작</h3>\n<blockquote>\n<p>sudo /etc/init.d/mariadb start\nsudo mysql<em>secure</em>installation</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. root password : Root 비밀번호 입력\n2. unix_socket : N 입력\n3. root password : Y or N 선택 입력\n4. remove anonymous users : Y 입력\n5. disallow root login remotely : Y or N 선택 입력\n6. remove test db : Y 입력\n7. reload privilege tables : Y 입력</code></pre></div>\n<h3>DB 재시작</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo /etc/init.d/mariadb restart\nsudo /etc/init.d/mariadb status</code></pre></div>\n<h3>DB 비번 변경시 (참고)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo service mariadb start --skip-grant-tables --skip-networking\nsudo mysql -u root\nALTER USER 'root'@'localhost' IDENTIFIED BY '새 비밀번호';\nFLUSH PRIVILEGES;</code></pre></div>\n<h2>2.2. frappe-bench 초기화</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bench init frappe-bench</code></pre></div>\n<h2>2.3 Supervisor 설정</h2>\n<h3>설정 링크 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd ~/frappe-bench\nbench setup supervisor --yes\nsudo ln -s `pwd`/config/supervisor.conf /etc/supervisor/conf.d/frappe-bench.conf</code></pre></div>\n<h3>서비스 등록</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl enable supervisor</code></pre></div>\n<h2>2.4. Nginx 설정</h2>\n<h3>설정파일 생성 및 링크 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd ~/frappe-bench\nbench setup nginx\nsudo ln -s `pwd`/config/nginx.conf /etc/nginx/conf.d/frappe-bench.conf</code></pre></div>\n<h3>서비스 등록</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl reload nginx</code></pre></div>\n<blockquote>\n<p>파일 검증 : sudo nginx -t</p>\n</blockquote>\n<h2>2.5 Redis 설정</h2>\n<blockquote>\n<p>/etc/sysctl.conf</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">vm.overcommit_memory = 1</code></pre></div>\n<h1>3. 앱 생성 및 사이트 등록</h1>\n<h2>3.1 새 앱 생성</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bench new-app 앱명</code></pre></div>\n<h2>3.2 새 사이트 생성</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bench new-site 사이트명</code></pre></div>\n<h2>3.3 기본 사이트 등록</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bench use 사이트명</code></pre></div>\n<h2>3.5 사이트에 앱 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bench --site [사이트명] install-app [설치할 앱이름]</code></pre></div>\n<h2>3.4 개발 모드로 실행</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bench start</code></pre></div>\n<h1>5. ODBC 및 FreeDTS 설치</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install -y unixodbc unixodbc-dev libodbc1 odbcinst1debian2 tdsodbc\nsudo apt-get install -y freetds-bin freetds-common freetds-dev libct4 libsybdb5</code></pre></div>\n<h2>4.1. ODBC 설정</h2>\n<blockquote>\n<p>/etc/odbcinst.ini</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[ODBC]\nTrace=No\nTraceFile=/tmp/odbc.log\n\n[MariaDB Unicode]\nDriver=libmaodbc.so\nDescription=MariaDB Connector/ODBC(Unicode)\nThreading=0\nUsageCount=1\n\n[FreeTDS]\nDescription=FreeTDS\nDriver=/usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so\nUsageCount=1</code></pre></div>\n<h2>4.2 DSN 설정 (사용시)</h2>\n<blockquote>\n<p>/etc/odbc.ini</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[MSSQL]\nDescription=MSSQL Connect on FreeTDS\nDriver=FreeTDS\nServer=[서버 주소]\nPort=[서버포트]\nDatabase=[DB명]\nTrace=yes\nTraceFile=/tmp/mssql.log\nUserName=[아이디]\nPassword=[비밀번호]</code></pre></div>\n<h1>5. 기타</h1>\n<h2>5.1 Production Mode 설정</h2>\n<p>모든 설정이 완료된 상태에서 실행하면 사이트에 대한 nginx 설정파일 갱신되며, site-enabled의 default 링크는 삭제됨</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo bench setup production [사용자]</code></pre></div>\n<h2>5.2 홈 권한 설정</h2>\n<p>Production 모드 설정 후 Assets 디렉토리에 접근이 안 될 경우 home user 폴더 권한 설정 변경(Others 실행추가)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo chmod 701 /home/[사용자]</code></pre></div>\n<h2>5.3 sudo 유저 추가, NoPasswd 설정</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo usermod -aG sudo [사용자]\nsudo passwd [사용자]\necho \"$USER ALL=(ALL:ALL) NOPASSWD: ALL\" | sudo tee /etc/sudoers.d/$USER</code></pre></div>\n<h2>5.4 폰트 설치</h2>\n<p>레포트를 PDF로 출력할 때 한글 깨짐이 발생하는 경우 한글 폰트 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">font_master.zip 파일에서 /etc/fonts와 /usr/share/fonts 폴더를 변경 할 것\u0013</code></pre></div>\n<h2>5.5 Frappe 캐시 삭제</h2>\n<p>bench console에서 아래 명령어 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">frappe.cache().flushall()</code></pre></div>\n<h2>5.6 Bench 업데이트</h2>\n<p>bench update --bench 명령어가 삭제되어 아래 명령어로 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pip install --upgrade frappe-bench</code></pre></div>","frontmatter":{"title":"Frappe 설치","date":"October 21, 2023","update":"October 21, 2023","tags":["frappe"],"series":"기본 사용법"},"fields":{"slug":"/frappe-installation/","readingTime":{"minutes":4.535}}},"seriesList":{"edges":[{"node":{"id":"d2980587-5202-5503-8e26-212591bfaabf","fields":{"slug":"/git-command/"},"frontmatter":{"title":"Git 기본 사용법"}}},{"node":{"id":"6e37c0b4-faff-5f7c-94ff-b66196af4e4a","fields":{"slug":"/frappe-installation/"},"frontmatter":{"title":"Frappe 설치"}}}]},"previous":{"fields":{"slug":"/git-command/"},"frontmatter":{"title":"Git 기본 사용법"}},"next":null},"pageContext":{"id":"6e37c0b4-faff-5f7c-94ff-b66196af4e4a","series":"기본 사용법","previousPostId":"d2980587-5202-5503-8e26-212591bfaabf","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}